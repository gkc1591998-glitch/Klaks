<footer id="footer" class="footer style-06">
    <div class="section-036">
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-lg-3">
                    <div class="logo-footer">
                        <img src="<?php echo site_url(); ?>assetsfe/klaks/logo-footer.png"
                            class="az_single_image-img attachment-full" alt="img">
                    </div>
                    <div class="akasha-listitem style-01">
                        <div class="listitem-inner">
                            <ul class="listitem-list">
                                <li>
                                    <span class="icon"><span class="flaticon-localization"></span></span>
                                    <?php echo (stripslashes(str_replace('\n', '', $web_settings['admin_address']))); ?>
                                </li>
                                <li>
                                    <a href="mailto:info@klaks.com">
                                        <span class="icon"><span class="flaticon-email"></span></span>
                                        <?php echo (stripslashes(str_replace('\n', '', $web_settings['admin_email']))); ?> </a>
                                </li>
                                <li>
                                    <span class="icon"><span class="flaticon-telephone"></span></span>
                                    <?php echo (stripslashes(str_replace('\n', '', $web_settings['admin_mobile']))); ?>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>


                <!-- <div class="col-sm-2 col-xs-12 col-lg-2">
                    <div class="footer-column">
                        <h4>Quick Links</h4>
                        <ul class="links">
                            <li class="first"><a title="How to buy" href="<?php echo site_url(); ?>aboutus">About us</a></li>
                            <li><a href="<?php echo site_url(); ?>sell">Sell With us</a></li>
                            <li><a href="<?php echo site_url(); ?>blog">Blog</a></li>
                            <li><a href="<?php echo site_url(); ?>careers">Careers</a></li>
                            <li><a href="<?php echo site_url(); ?>faqs">Faqs</a></li>
                            <li class="last"><a title="Return policy" href="<?php echo site_url(); ?>contactus">Contact us</a></li>
                        </ul>
                    </div>          
                </div>
                
                <div class="col-sm-2 col-xs-12 col-lg-2 col-md-6 col-lg-3">
                    <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul class="links">
                            <li class="first"><a  href="<?php echo site_url(); ?>terms">Terms & Conditions</a></li>
                            <li><a  href="<?php echo site_url(); ?>shipping">Shipping Policy</a></li>
                            <li><a  href="<?php echo site_url(); ?>shipping_charges">Shipping Charges</a></li>
                            <li><a  href="<?php echo site_url(); ?>privacy">Privacy</a></li>
                            <li><a  href="<?php echo site_url(); ?>returns">Returns & Refunds</a></li>                
                    </ul>
                    </div>
                </div> -->


                <div class="col-md-6 col-lg-3">
                    <div class="akasha-listitem style-01">
                        <div class="listitem-inner">
                            <h4 class="title">Customer </h4>
                            <ul class="listitem-list">
                                <li>
                                    <a href="<?php echo site_url(); ?>track">
                                        Track Order </a>
                                </li>
                                <li>
                                    <a href="<?php echo site_url(); ?>returns">
                                        Place Return/Exchange Request </a>
                                </li>
                                <li>
                                    <a href="<?php echo site_url(); ?>returns">
                                        Return/Exchange Policy </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-2">
                    <div class="akasha-listitem style-01">
                        <div class="listitem-inner">
                            <h4 class="title"> Get to know us </h4>
                            <ul class="listitem-list">
                                <li>
                                    <a href="<?php echo site_url(); ?>aboutus">
                                        About Us </a>
                                </li>
                                <li>
                                    <a href="<?php echo site_url(); ?>contactus">
                                        Contact Us </a>
                                </li>
                                <li>
                                    <a href="<?php echo site_url(); ?>faqs">
                                        FAQ's </a>
                                </li>
                                <li>
                                    <a href="<?php echo site_url(); ?>terms">
                                        Terms & Conditions </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 col-lg-4">
                    <div class="akasha-newsletter style-04">
                        <div class="newsletter-inner">
                            <div class="newsletter-info">
                                <div class="newsletter-wrap">
                                    <h3 class="title">Sign up and save</h3>
                                    <p class="desc">Sign up now and be the first to know about exclusive offers, latest fashion trends & style tips!</p>
                                </div>
                            </div>
                            <div class="newsletter-form-wrap">
                                <div class="newsletter-form-inner">
                                    <input class="email email-newsletter" name="email"
                                        placeholder="Enter your email ..." type="email">
                                    <a href="javascript:void(0)" class="button btn-submit submit-newsletter">
                                        <span class="text">Subscribe</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="section-016">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>Â© Copyright 2024 <a href="javascript:void(0)">Klaks</a>. All Rights Reserved.</p>
                </div>
                <div class="col-md-6">
                    <div class="payment">
                        <div class="akasha-socials style-01">
                            <div class="content-socials">
                                <ul class="socials-list">
                                    <li>
                                        <a href="https://facebook.com/" target="_blank">
                                            <i class="fa fa-facebook"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.instagram.com/" target="_blank">
                                            <i class="fa fa-instagram"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://twitter.com/" target="_blank">
                                            <i class="fa fa-twitter"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.pinterest.com/" target="_blank">
                                            <i class="fa fa-youtube"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<div class="footer-device-mobile">
    <div class="wapper">
        <div class="footer-device-mobile-item device-home">
            <a href="<?php echo site_url(); ?>home">
                <span class="icon">
                    <i class="fa fa-home" aria-hidden="true"></i>
                </span>
                Home
            </a>
        </div>
        <div class="footer-device-mobile-item device-home device-wishlist">
            <a href="<?php echo site_url(); ?>products">
                <span class="icon">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                </span>
                Shop
            </a>
        </div>
        <div class="footer-device-mobile-item device-home device-cart">
            <a href="<?php echo site_url(); ?>cart">
                <span class="icon">
                    <i class="fa fa-shopping-basket" aria-hidden="true"></i>
                    <span class="count-icon mobile-cart-count">
                        <?php echo $this->cart->total_items(); ?>
                    </span>
                </span>
                <span class="text">Cart</span>
            </a>
        </div>
        <div class="footer-device-mobile-item device-home device-cart">
            <a href="<?php echo site_url(); ?>dashboard/wishlist">
                <span class="icon">
                    <i class="fa fa-heart-o" aria-hidden="true"></i>
                    <span class="count-icon wishlist-count">
                        <?php
                        if ($this->session->userdata('user_id')) {
                            $this->load->model('Wishlist_model');
                            echo $this->Wishlist_model->get_wishlist_count($this->session->userdata('user_id'));
                        } else {
                            echo '0';
                        }
                        ?>
                    </span>
                </span>
                <span class="text">Wishlist</span>
            </a>
        </div>
        <div class="footer-device-mobile-item device-home device-user">
            <a href="<?php echo site_url(); ?>login">
                <span class="icon">
                    <i class="fa fa-user" aria-hidden="true"></i>
                </span>
                Account
            </a>
        </div>
    </div>
</div>
<a href="#" class="backtotop active">
    <i class="fa fa-angle-up"></i>
</a>

<script src="<?php echo site_url(); ?>assetsfe/js/jquery-1.12.4.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/bootstrap.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/chosen.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/countdown.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/jquery.scrollbar.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/lightbox.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/magnific-popup.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/slick.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/jquery.zoom.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/threesixty.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/jquery-ui.min.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/mobilemenu.js"></script>
<script src='https://maps.googleapis.com/maps/api/js?key=AIzaSyC3nDHy1dARR-Pa_2jjPCjvsOR4bcILYsM'></script>
<script src="<?php echo site_url(); ?>assetsfe/js/functions.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/share-product.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/product-video-autoplay.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/product-review-handler.js"></script>
<script src="<?php echo site_url(); ?>assetsfe/js/functions.js"></script>
<script>
    window.addEventListener('load', function() {
        // Show preloader until page fully loads
        document.getElementById('preloader').style.display = 'flex';
        // Once everything is loaded, fade out preloader
        setTimeout(function() {
            document.getElementById('preloader').style.opacity = '0';
            document.getElementById('preloader').style.transition = 'opacity 0.5s';
            // Remove preloader from DOM after fade
            setTimeout(function() {
                document.getElementById('preloader').style.display = 'none';
            }, 500);
        }, 100); // Shorter delay to ensure page is ready
    });
</script>

<!-- Toast styles moved to assetsfe/css/toast.css and loaded from header -->
<!-- Toast script (external) -->
<script src="<?php echo site_url(); ?>assetsfe/js/toast.js"></script>

<script>
    function toggleListView(event) {
        event.preventDefault();

        // Get all product items under main-content
        const productItems = document.querySelectorAll('.main-content .product-item');

        // Toggle classes for each product item
        productItems.forEach(item => {
            if (item.classList.contains('col-ts-6')) {
                item.classList.remove('col-ts-6');
                item.classList.add('col-ts-12');
            } else {
                item.classList.remove('col-ts-12');
                item.classList.add('col-ts-6');
            }
        });

        const productInfoElements = document.querySelectorAll('.product-info');

        // Toggle display for each element
        productInfoElements.forEach(element => {
            if (element.style.display === 'none') {
                element.style.display = 'block';
            }

        });


        // Toggle active class on the clicked button
        const gridButtons = document.querySelectorAll('.modes-mode');
        gridButtons.forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }
</script>

<script>
    function toggleProductInfo(event) {
        event.preventDefault();

        // Get all elements with class product-info
        const productInfoElements = document.querySelectorAll('.product-info');

        // Toggle display for each element
        productInfoElements.forEach(element => {
            if (element.style.display === 'none') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }

        });


        // Get all product items under main-content
        const productItems = document.querySelectorAll('.main-content .product-item');

        // Toggle classes for each product item
        productItems.forEach(item => {
            if (item.classList.contains('col-ts-12')) {
                item.classList.remove('col-ts-12');
                item.classList.add('col-ts-6');
            }
        });

        // Toggle active class on the clicked button
        const gridButtons = document.querySelectorAll('.modes-mode');
        gridButtons.forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }
</script>

<script>
    function toggleFilterSidebar() {
        const widgetArea = document.getElementById('widget-area');

        // Toggle d-none class for mobile view
        widgetArea.classList.toggle('d-none');

        // Keep the d-md-block class for desktop view
        widgetArea.classList.add('d-md-block');

        // Add mobile-specific styling
        if (!widgetArea.classList.contains('d-none')) {
            widgetArea.style.position = 'fixed';
            widgetArea.style.top = '0';
            widgetArea.style.left = '0';
            widgetArea.style.width = '100%';
            widgetArea.style.height = '100vh';
            widgetArea.style.backgroundColor = 'white';
            widgetArea.style.zIndex = '1000';
            widgetArea.style.overflowY = 'auto';
            widgetArea.style.padding = '20px';
        } else {
            widgetArea.style = null;
        }
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const section = header.parentElement;
                const isActive = section.classList.contains('active');

                // Close all sections
                document.querySelectorAll('.accordion-section').forEach(section => {
                    section.classList.remove('active');
                });

                // Open clicked section if it wasn't already active
                if (!isActive) {
                    section.classList.add('active');
                }
            });
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        let isMouseOverGallery = false;
        document.querySelector('.flex-viewport')?.addEventListener('mouseenter', function() {
            isMouseOverGallery = true;
        });
        document.querySelector('.flex-viewport')?.addEventListener('mouseleave', function() {
            isMouseOverGallery = false;
        });
        setInterval(function() {
            if (!isMouseOverGallery) {
                const nextButton = document.querySelector('.next.slick-arrow');
                if (nextButton) {
                    nextButton.click();
                }
            }
        }, 3000);
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sizeButtons = document.querySelectorAll('.size-btn');
        sizeButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove btn-secondary from all buttons
                sizeButtons.forEach(btn => {
                    btn.classList.remove('btn-dark');
                    btn.classList.add('btn-outline-dark');
                });
                // Add btn-secondary to clicked button
                this.classList.remove('btn-outline-dark');
                this.classList.add('btn-dark');
            });
        });
    });
</script>

<script src="<?php echo site_url(); ?>assetsfe/js/product-cards.js"></script>

<script>
    function updateCartQty(btn, delta) {
        var container = btn.closest('.counter-container');
        var valueInput = container.querySelector('.counter-value input');
        var quantity = parseInt(valueInput.value);
        if (isNaN(quantity)) quantity = 1;
        quantity += delta;
        if (quantity < 1) quantity = 1;
        valueInput.value = quantity;

        // Gather info
        var parent = btn.closest('.mx-3');
        var size = parent.querySelector('.product_size').value;
        var id = parent.querySelector('.product_id').value;
        var rowId = parent.querySelector('.cart_row_id').value;
        var price = parent.querySelector('.product_price').value;

        // Ajax update
        jQuery.ajax({
            type: "POST",
            url: '<?php echo site_url(); ?>cart/updatecart',
            data: {
                qty: quantity,
                rowId: rowId,
                price: price,
            },
            complete: function(data) {
                console.log("Cart updated:", data);
                var op = data.responseText.trim();
                jQuery("#cartid").html(op);
            }
        });
    }

    function deletecartcheckout(valu) {
        console.log('deletecartcheckout called with rowid:', valu);
        
        jQuery.ajax({
            type: "POST",
            url: '<?php echo site_url(); ?>cart/deletecart',
            data: "valu=" + valu,
            success: function(data) {
                console.log('Cart page delete success');
                var op = data.trim();
                
                // Replace the entire cart div (AJAX response includes the outer div)
                jQuery("#cartid").replaceWith(op);
            },
            error: function(xhr, status, error) {
                console.error('Cart page delete failed:', status, error);
            }
        });
    }

    function deletecart(valu) {
        console.log('=====================================');
        console.log('DELETE CART FUNCTION CALLED');
        console.log('Rowid:', valu);
        console.log('URL:', '<?php echo site_url(); ?>products/deletecart');
        
        // Remember if cart was open before deletion
        var wasOpen = jQuery("#cartdivid").hasClass('open');
        console.log('Cart was open before delete:', wasOpen);
        console.log('Cart element exists:', jQuery("#cartdivid").length);
        
        jQuery.ajax({
            type: "POST",
            url: '<?php echo site_url(); ?>products/deletecart',
            data: "valu=" + valu,
            beforeSend: function() {
                console.log('AJAX request starting...');
            },
            success: function(data) {
                console.log('=====================================');
                console.log('AJAX SUCCESS RECEIVED');
                console.log('Response length:', data.length);
                console.log('Response preview (first 500 chars):', data.substring(0, 500));
                
                var op = data.trim();
                console.log('Trimmed response length:', op.length);
                
                // Check if cartdivid exists before replace
                var cartExists = jQuery("#cartdivid").length;
                console.log('Cart element exists before replace:', cartExists);
                
                // Replace the entire cart div (AJAX response includes the outer div)
                jQuery("#cartdivid").replaceWith(op);
                console.log('replaceWith executed');
                
                // Check if cartdivid exists after replace
                var cartExistsAfter = jQuery("#cartdivid").length;
                console.log('Cart element exists after replace:', cartExistsAfter);
                
                // Keep cart open if it was open before and still has items
                var hasWidget = jQuery("#cartdivid .widget_shopping_cart").length;
                console.log('Has widget_shopping_cart:', hasWidget);
                
                if (wasOpen && hasWidget > 0) {
                    console.log('Adding open class to keep cart open');
                    jQuery("#cartdivid").addClass('open');
                } else {
                    console.log('NOT adding open class. wasOpen:', wasOpen, 'hasWidget:', hasWidget);
                }
                console.log('Delete cart process complete');
                console.log('=====================================');
            },
            error: function(xhr, status, error) {
                console.error('=====================================');
                console.error('AJAX ERROR');
                console.error('Status:', status);
                console.error('Error:', error);
                console.error('Response Text:', xhr.responseText);
                console.error('Status Code:', xhr.status);
                console.error('=====================================');
            }
        });
    }
</script>


<script src="<?php echo site_url(); ?>assetsfe/js/wishlist.js"></script>
<!-- Product Filters JavaScript -->
<script src="<?php echo site_url(); ?>assetsfe/js/product_filters.js"></script>
<script>
    // Set site URL for wishlist functionality
    var site_url = '<?php echo site_url(); ?>';
    var user_logged_in = <?php echo $this->session->userdata('user_id') ? 'true' : 'false'; ?>;
    console.log('INLINE SCRIPT EXECUTED - site_url:', site_url, 'user_logged_in:', user_logged_in);

    // Fix for mobilemenu.js jQuery selector error
    $(document).ready(function() {
        // Override jQuery's find method to handle invalid selectors
        var originalFind = $.fn.find;
        $.fn.find = function(selector) {
            // Check if selector is just "#" which is invalid
            if (typeof selector === 'string' && selector.trim() === '#') {
                return $(); // Return empty jQuery object
            }
            return originalFind.call(this, selector);
        };
        
        // Initialize mobile cart count visibility
        try {
            var currentCartCount = <?php echo $this->cart->total_items(); ?>;
            if (window.updateMobileCartCount) {
                window.updateMobileCartCount(currentCartCount);
            }
        } catch (e) {
            console.warn('Failed to initialize mobile cart count:', e);
        }
        
        // DEBUG: Log all remove buttons on page load
        console.log('=== CART DEBUG INFO ON PAGE LOAD ===');
        console.log('Remove buttons found:', $('.remove_from_cart_button').length);
        $('.remove_from_cart_button').each(function(i, btn) {
            console.log('Button', i, ':', {
                html: btn.outerHTML.substring(0, 150),
                dataRowid: $(btn).data('rowid'),
                onclick: $(btn).attr('onclick')
            });
        });
        console.log('Cart element exists:', $('#cartdivid').length);
        console.log('Cart has open class:', $('#cartdivid').hasClass('open'));
        console.log('====================================');
        
        // Cart dropdown handler - toggle 'open' class on .block-minicart parent
        $(document).on('click', '#cartdivid .block-link, #mobile-cartdivid .block-link', function(e) {
            // Don't interfere with remove button clicks
            if ($(e.target).hasClass('remove_from_cart_button') || $(e.target).closest('.remove_from_cart_button').length > 0) {
                return;
            }
            
            e.preventDefault();
            e.stopPropagation();
            
            // Find the .block-minicart parent (CSS needs 'open' class on this element)
            var $minicartParent = $(this).closest('.block-minicart, .mobile-cart');
            
            // Close other open carts
            $('.block-minicart, .mobile-cart').not($minicartParent).removeClass('open');
            
            // Toggle open class on the parent
            $minicartParent.toggleClass('open');
            
            return false;
        });
        
        // Delegated event handler for remove buttons (works after AJAX updates)
        $(document).on('click', '.remove_from_cart_button', function(e) {
            console.log('*************************************');
            console.log('REMOVE BUTTON CLICKED');
            console.log('Event target:', e.target);
            console.log('Event currentTarget:', e.currentTarget);
            
            e.preventDefault();
            e.stopPropagation();
            
            console.log('Event default prevented and propagation stopped');
            
            var $link = $(this);
            console.log('Link element:', $link[0]);
            console.log('Link classes:', $link.attr('class'));
            
            // Try to get rowid from data attribute first
            var rowid = $link.data('rowid');
            console.log('data-rowid attribute:', rowid);
            
            // If no data attribute, extract from onclick attribute
            if (!rowid) {
                var onclickAttr = $link.attr('onclick');
                console.log('No data-rowid found, checking onclick attr:', onclickAttr);
                
                if (onclickAttr) {
                    var match = onclickAttr.match(/deletecart\('([^']+)'\)/);
                    console.log('Regex match result:', match);
                    if (match && match[1]) {
                        rowid = match[1];
                        console.log('Extracted rowid from onclick:', rowid);
                    }
                }
            }
            
            if (rowid) {
                console.log('Final rowid to delete:', rowid);
                console.log('Calling deletecart function...');
                console.log('typeof deletecart:', typeof deletecart);
                deletecart(rowid);
            } else {
                console.error('ERROR: Could not extract rowid from remove button');
                console.error('Link HTML:', $link[0].outerHTML);
            }
            
            console.log('*************************************');
            return false;
        });
    });
</script>
</body>

</html>